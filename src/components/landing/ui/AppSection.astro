---
import type { ImageMetadata } from "astro";
import AppCard from "./AppCard.astro";

interface CardProps {
    title: string;
    description: string;
    note: string;
    webLink: string;
    repoLink: string;
    screenshot: ImageMetadata;
    alt: string;
}

interface Props {
    title: string;
    description: string;
    cards: CardProps[];
}

const { title, description, cards } = Astro.props;
---

<article class="text-center constrained">
    <h3 class="mb-2">
        {title}
    </h3>
    <p class="text-lg">
        {description}
    </p>
    <div
        class="border-b-4 w-32 border-secondary mt-4 mb-8 rounded-full mx-auto">
    </div>
    <div id="app-grid">
        {cards.map(card => <AppCard {...card} />)}
    </div>
</article>

<style>
    #app-grid {
        display: grid;
        gap: 2rem;

        article {
            grid-column: span 2;
        }

        @media (min-width: 768px) {
            grid-template-columns: repeat(4, 1fr);

            article:last-child:nth-child(2n - 1) {
                grid-column-end: -2;
            }
        }

        @media (min-width: 1280px) {
            grid-template-columns: repeat(6, 1fr);

            article:last-child:nth-child(2n - 1) {
                grid-column-end: auto
            }

            article:last-child:nth-child(3n - 1) {
                grid-column-end: -2;
            }

            article:nth-last-child(2):nth-child(3n + 1) {
                grid-column-end: 4;
            }

            article:last-child:nth-child(3n - 2) {
                grid-column-end: 5;
            }
        }
    }
</style>
